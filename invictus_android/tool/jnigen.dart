import 'dart:io';

import 'package:jnigen/jnigen.dart';
import 'package:logging/logging.dart';

void main() async {
  final root = Platform.script.resolve('../');
  final config = Config(
    outputConfig: OutputConfig(
      dartConfig: DartCodeOutputConfig(
        path: root.resolve('lib/src/jni/'),
        structure: OutputStructure.packageStructure,
      ),
    ),
    classes: [
      'android.app.Activity',
      'android.app.PendingIntent',
      'android.content.BroadcastReceiver',
      'android.content.Context',
      'android.content.Intent',
      'android.content.IntentFilter',
      'android.net.ConnectivityManager',
      'android.net.DhcpInfo',
      'android.net.InetAddresses',
      'android.net.IpPrefix',
      'android.net.IpSecManager',
      'android.net.LinkAddress',
      'android.net.LinkProperties',
      'android.net.MacAddress',
      'android.net.Network',
      'android.net.NetworkInfo',
      'android.net.NetworkRequest',
      'android.net.NetworkCapabilities',
      'android.net.NetworkSpecifier',
      'android.net.ProxyInfo',
      'android.net.RouteInfo',
      'android.net.SocketKeepalive',
      'android.net.TransportInfo',
      'android.net.wifi.MloLink',
      'android.net.wifi.ScanResult',
      'android.net.wifi.SupplicantState',
      'android.net.wifi.WifiConfiguration',
      'android.net.wifi.WifiInfo',
      'android.net.wifi.WifiManager',
      'android.net.wifi.aware.WifiAwareNetworkInfo',
      'android.os.Build',
      'android.os.Handler',
      'android.os.Looper',
      'android.os.PowerManager',
      'androidx.core.content.ContextCompat',
      'java.io.FileDescriptor',
      'java.net.DatagramSocket',
      'java.net.InetAddress',
      'java.net.Inet4Address',
      'java.net.Inet6Address',
      'java.net.InetSocketAddress',
      'java.net.NetworkInterface',
      'java.net.Proxy',
      'java.net.Socket',
      'java.net.URL',
      'java.net.URLConnection',
      'java.util.Collection',
      'java.util.concurrent.Executor',
      'javax.net.SocketFactory',
      // 'dev.zeekr.invictus_android.JBroadcastReceiver',
      // 'dev.zeekr.invictus_android.JBroadcastReceiverImpl',
      // 'dev.zeekr.invictus_android.JConnectivityManager',
      // 'dev.zeekr.invictus_android.JInet4AddressUtil',
      // 'dev.zeekr.invictus_android.JIpConfiguration',
      // 'dev.zeekr.invictus_android.JNetworkUtil',
      // 'dev.zeekr.invictus_android.JStaticIpConfiguration',
      // 'dev.zeekr.invictus_android.ethernet.JEthernetManager',
      'dev.zeekr.invictus_android.os.InvictusPowerManager',
    ],
    sourcePath: [root.resolve('android/src/main/kotlin/')],
    androidSdkConfig: AndroidSdkConfig(
      addGradleDeps: true,
      androidExample: 'example/',
    ),
    nonNullAnnotations: ['android.annotation.NonNull'],
    nullableAnnotations: ['android.annotation.Nullable'],
    logLevel: Level.ALL,
  );
  await generateJniBindings(config);
}
